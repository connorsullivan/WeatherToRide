
{% extends 'base.html' %}

{% block title %}
    Add Location
{% endblock %}

{% block body %}

    <br><h1>Location</h1><br>

    {% from "includes/_form_helpers.html" import render_field %}

    <form method="POST">

        {{ form.csrf_token }}

        <div class="form-group">
            {{ render_field( form.title, class_="form-control" ) }}
        </div>

        <div class="form-group">
            {{ render_field( form.address, class_="form-control" ) }}
        </div>

        <br>
        <div class="btn-group">
            <button type="button" class="btn btn-success" 
                onclick="getLocation()">Use Current Location</button>
            <button type="submit" class="btn btn-primary">Submit</button>
        </div>

    </form>

{% endblock %}

{% block script %}

    <!-- Adapted from: https://www.w3schools.com/htmL/html5_geolocation.asp -->

    <script>

        var latField = document.getElementById("latField");
        var lngField = document.getElementById("lngField");
        
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition);
            } else { 
                alert("Geolocation is not supported by this browser.");
            }
        }
        
        function showPosition(position) {
            latField.value = position.coords.latitude;
            lngField.value = position.coords.longitude;
        }

    </script>

{% endblock %}
